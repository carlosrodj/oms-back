const express = require('express');
const multer = require('multer');
const multerConfig = require('./config/multer');

const routes = express.Router();

const BoxController = require('./controllers/BoxController');
const FileController = require('./controllers/FileController');

routes.post('/boxes', BoxController.store);
routes.get('/boxes/:id', BoxController.show);
routes.post('/boxes/:id/files', multer(multerConfig).single('file'), FileController.store);

routes.get('/', function(req, res){
  var img = new Buffer('/9j/4AAQSkZJRgABAQAAAQABAAD//gA7Q1JFQVRPUjogZ2QtanBlZyB2MS4wICh1c2luZyBJSkcgSlBFRyB2NjIpLCBxdWFsaXR5ID0gOTAK/9sAQwADAgIDAgIDAwMDBAMDBAUIBQUEBAUKBwcGCAwKDAwLCgsLDQ4SEA0OEQ4LCxAWEBETFBUVFQwPFxgWFBgSFBUU/9sAQwEDBAQFBAUJBQUJFA0LDRQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQU/8AAEQgA/gEsAwEiAAIRAQMRAf/EAB8AAAEFAQEBAQEBAAAAAAAAAAABAgMEBQYHCAkKC//EALUQAAIBAwMCBAMFBQQEAAABfQECAwAEEQUSITFBBhNRYQcicRQygZGhCCNCscEVUtHwJDNicoIJChYXGBkaJSYnKCkqNDU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6g4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2drh4uPk5ebn6Onq8fLz9PX29/j5+v/EAB8BAAMBAQEBAQEBAQEAAAAAAAABAgMEBQYHCAkKC//EALURAAIBAgQEAwQHBQQEAAECdwABAgMRBAUhMQYSQVEHYXETIjKBCBRCkaGxwQkjM1LwFWJy0QoWJDThJfEXGBkaJicoKSo1Njc4OTpDREVGR0hJSlNUVVZXWFlaY2RlZmdoaWpzdHV2d3h5eoKDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uLj5OXm5+jp6vLz9PX29/j5+v/aAAwDAQACEQMRAD8A/TpvB2hSSM76Lp7sxJLG1jJJPfpQvg7QVOV0XT1Ptax/4VsUUAZf/CL6OORpVkD/ANe6f4Vaj0u0iUKlrAijssYAq1RQBX/s+3/594v++BSDTbUHItoc/wDXMVZ/CigCD7Bbf8+8X/fAo/s+2/594v8AvgVPj3ooAr/YLf8A594v++BQNPtR/wAu8X/fAqxijHvQBXOnWrDBt4iPQoKYNJsh0s4B9I1/wq3RigCp/Zdp/wA+sP8A37X/AAo/sqz7WkAB6/u1/wAKt5FJkUAVf7Isj1s7f/v0v+FKdLtD/wAusB/7Zr/hVrIoyKAKn9lWXe0gwP8Apmv+FNbRrFutlbn/ALZL/hVzIpcigCidD04jmwtj9YV/wp0ejWEedtlbr9IlH9KuZFJkUAVDo9gTk2VuT6+Uv+FH9j2P/Plb/wDfpf8ACrmRRkUAUxpFiP8Alztx/wBsl/wp39k2X/PpB/36X/CrORS5FAFT+yLL/nzg/wC/S/4Uf2RY/wDPnb/9+l/wq3RQBT/saxzn7Fb59fKX/Cl/sizz/wAekH/fpf8ACrdFAFX+y7PP/HpB/wB+x/hR/ZNmetrB/wB+1/wq1RQBUOj2P/Pnb/8Afpf8KUaXaAYFrCB6eWMfyq1RQBT/ALHsv+fK3/79L/hQdGsSP+PK3/79L/hVyigCn/Y9j/z52+P+uS/4Uv8AZFl/z6Qf9+lq3RQBU/siy6/YrfP/AFyX/CpIrOGBSsUMcak5wqADNT0UAFFFFABiijmigAooooAKKM0ZoAKKM0ZoAKKM0ZoAM+9GaKKADNGfeiigAzRmiigAz70ZoooAM0Z96KKADNGaKKACiiigAzRRRQAUZoooAKKKKADNFFFABRmiigAozRRQAUUtIaACiijNABRRRmgAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAoyaKSgBaP0ooNAB+NFHFFABRRRQAUUUUAFFFFABRRRQAYoxRRmgAxRijNFABijFGaM0AGKMUUZoAMUYozRQAYoxRmjNABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUYoooAMUUUUAFFFFABRR+FFABRRR+FABRRRQAUUZozQAUUZozQAUUZozQAUUZozQAUUZozQAUUZozQAflRRRQAflR+VFFABR+VFFAB+VFFFAB+VH5UUUAFH5UUUAH5UY+lFFABRiiigAxRRij8qACij8qPyoAKKKKACiiigAooooAM0ZoooAM0ZoooAM0ZoooAM0ZoooAM0ZoooAM0ZoooAM0ZoooAM0ZoooAM0ZoooAM0ZoooAM0ZoooAM0ZoooAM0ZoooAKKKKACiiigA/z1ooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKADNGaM0ZoAM0ZozRkUAFFGaMigAzRmjFGKADNGaMUYoAM0ZoxRigAzRRRQAZozRRQAUZoooAM0UUUAGaM0UUAFGaKKADFGKKKADFGKKKADFGKKKADFGKKKADFGKKKADFGKKKADFGKKWgBKOKKKADNHFFGKADijijFGKADFGKKKADFGKKKADFGKKKACij8aPxoAKKPxo/GgAoo/Gj8aACij8aPxoAKKPxo/GgAoo/Gj8aACiiigAxRRRQAUYoooAKKKKADFFFFABRiiigAo/z0oooAMUUYooAKPwoozQAY9qPwozRmgAoozRmgAoozRmgAoozRmgBaKSigBaKSigBaKSigBaKSigBaKSigBaKSigAooooAKKKKACiiigAooooAKKKKACiiigAooozQAUUc0UAJiloooAKKKKACijNGaACijNGaACijNGaAEopaKACkpaKAEpaKKAEopaKACkpaKAEpaKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKSgBaKTNGaAFoozRmgAoozRmgAoozRmgAooooAWkoooAKWkooAKKKKAFpKKKAClpKKAClpKKACiiigBaSiigApaSigAooooAWkoooAKWkooAKKO9FABRRSfjQAtFJ+NH40ALRRzRz60AFFHNHNABRRz60c0AFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAGaM0UUAGaM0UUAGaM0UUAGaM0UUAGaM0UUAGaM0UUAGaM/wCc0UUAFFHeigApKWigBKKWigAoooxQAUUUUAFFGKKAD8KKKKACj8KKKACiiigA/CiiigAo/CiigAooooAKOKKKACiiigA4ooooAKOKKKACiiigA4ooooAKOKKKACiiigAoooxQAUUUUAFFFFABRRRQAUUUUAGKKM0ZoAKMUZozQAUUZozQAYoozRmgAoxRmjNABRRmjNABmjNGKMUAFGaMUYoAM0UYoxQAZozRijFABRmjFGKADNFGKMUAGaTilxRj60AFFFFABRRRQAUUUUAFFFJQAtFFFABRSUtABRRiigAooxRigAoooxQAUUYooAKKMUYoAKKKMUAJ/npR/npS4owaAD/PSk/z0pcUYoAT/PSl/wA9KMGjFACf56Uf56UuKMGgA/z0pP8APSlxRigBP89KX/PSjBoxQAn+elGP84pcUYNAH//Z', 'base64')
  
  res.writeHead(200, {
     'Content-Type': 'image/png',
   });
   res.end(img); 
})

module.exports = routes;
